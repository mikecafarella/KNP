<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>A Tour of KGPL - Knowledge Graph Programming Language</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../../css/theme.css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  <link href="../../css/custom.css" rel="stylesheet" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "A Tour of KGPL";
    var mkdocs_page_input_path = "old/tour.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Knowledge Graph Programming Language</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../..">Welcome</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../tutorial/">Tutorial</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../install/">Install</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../knowledgeclient/">Knowledge Client</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../lineage/">Lineage</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../sharingservice/">Sharing Service</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../restapi/">REST API</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../api/">API Documentation</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../about/">About</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Knowledge Graph Programming Language</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
    
    <li>A Tour of KGPL</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="a-tour-of-kgpl">A Tour of KGPL</h1>
<p>Here is a whirlwind tour of KGPL!</p>
<h2 id="values">Values</h2>
<p>A <strong>value</strong> in KGPL contains several subfields.</p>
<p>The <code>concrete-value</code> field is the standard value you actually want to
process and use. It can be one of:</p>
<ul>
<li>A Python value</li>
<li>An <code>Entity</code>. This is a special type designed to model the Wikidata KG
  entity model. It has properties and values.  The property labels may
  be annotated with a label from a shared namespace.</li>
<li>A <code>Relation</code>. This is a data table with a schema of property names.</li>
</ul>
<p>The <code>id</code> field is a universally-unique identifier.  It is akin to a
UUID or GUID, but since we need one for every value in every execution
of a KGPL program, we likely need more bits than previous UUID
standards.</p>
<p>The <code>lineage</code> field describes how the value was computed. It is a
directed graph that describes the unique values and function that were
used to compute this value.  (<a href="lineage.md">Read more about lineage</a>,
if you like.) </p>
<p>The <code>url</code> field is populated only after the value is "registered" with
a <a href="sharingservice.md">KGPL sharing service</a>. The <code>url</code> field, if
populated, always syntactically contains the <code>id</code> (so if you have the
<code>url</code>, you can derive the <code>id</code>). When a value is registered with a
KGPL sharing service, that service can always return all of the
value's fields.</p>
<p>The <code>annotations</code> field is arbitrary human-readable information that
can be added to the value. It is carried along with the value, but has
no practical impact on its usage.</p>
<p>A value is created once and can never be edited. As a result, a
registered value never needs to be edited.</p>
<p>Values can be shared between programs or users via simply sharing the
URL. As a result, before a value can be shared it must be registered
at a KGPL sharing service. When a value is shared, the URL and its lineage is always
available to the consumer. This means every KGPL program output can be
examined for how it was computed. This is helpful for
sharing datasets in a scientific, engineering, or policy context.</p>
<p>You can observe all of the KGPL value fields at the Python REPL:</p>
<div class="codehilite"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">kgpl</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">kgpl</span> <span class="kn">import</span> <span class="n">kgplSquare</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">kgplSquare</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">concrete</span><span class="o">-</span><span class="n">value</span><span class="p">:</span> <span class="mi">9</span>
<span class="nb">id</span><span class="p">:</span> <span class="mf">0051051e-6</span><span class="n">e0e</span><span class="o">-</span><span class="mi">11</span><span class="n">ea</span><span class="o">-</span><span class="n">b7d5</span><span class="o">-</span><span class="mi">8</span><span class="n">c859062bac5</span>
<span class="n">lineage</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">kgpl</span><span class="o">.</span><span class="n">Lineage</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0x10cd02470</span><span class="o">&gt;</span>
<span class="n">url</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">unregistered</span><span class="o">&gt;</span>
<span class="n">annotations</span><span class="p">:</span> <span class="p">[]</span>
</code></pre></div>

<h2 id="variables">Variables</h2>
<p>KGPL variables are named objects that refer to a particular KGPL value
at any given point in time.</p>
<p>The variable's <code>id</code> field is a universally-unique identifier for all
time and space.  This never changes.</p>
<p>The <code>current-value</code> field is the <code>id</code> of a KGPL value.  This can be
changed over time</p>
<p>The <code>owner</code> field indicates the username of the owner of the
variable. This is important for determining who is allowed to modify a
variable.</p>
<p>The <code>url</code> field is optional. It is populated when the variable is
registered with a <a href="sharingservice.md">KGPL sharing service</a>. The URL syntactically
contains the variable's <code>id</code>. When a KGPL sharing service is
queried using this URL, it will return all of the variable's other
fields.</p>
<p>Note that in principle, a variable could be shared and widely known,
but its value could be more limited.  This might be appropriate in
certain information-sharing scenarios; for example, the government
knows that there is a precomputed monthly unemployment number, but
this number is not widely revealed until a particular time and date.</p>
<p>The <code>annotations</code> field is arbitrary human-readable information that
can be added to the variable. It is carried along with the variable,
but has no practical impact on its programmatic KGPL usage.  It could
have an impact on the findability or usefulness of the variable for
other human beings. For example, there might be a search service that
allows users to find useful variables on an existing KGPL sharing
service. This search service might use the annotations field to get
better search results.</p>
<p>When a registered variable is changed, the update should be
immediately transmitted to its registered sharing service.</p>
<p>You can observe all of the KGPL variable fields --- and those of its
current value --- at the Python REPL:</p>
<div class="codehilite"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">kgpl</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">kgpl</span> <span class="kn">import</span> <span class="n">kgplSquare</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">kgpl</span> <span class="kn">import</span> <span class="n">KGPLVariable</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="n">KGPLVariable</span><span class="p">(</span><span class="n">kgplSquare</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span>
<span class="nb">id</span><span class="p">:</span> <span class="mi">8</span><span class="n">cf28bb1</span><span class="o">-</span><span class="n">ea67</span><span class="o">-</span><span class="mi">4</span><span class="n">c37</span><span class="o">-</span><span class="n">a949</span><span class="o">-</span><span class="mi">7</span><span class="n">d8bab2be6f8</span>
<span class="n">owner</span><span class="p">:</span> <span class="n">michjc</span>
<span class="n">url</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">unregistered</span><span class="o">&gt;</span>
<span class="n">annotations</span><span class="p">:</span> <span class="p">[]</span>
<span class="n">current</span><span class="o">-</span><span class="n">value</span><span class="p">:</span> <span class="mi">9</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span><span class="o">.</span><span class="n">currentvalue</span>
<span class="n">concrete</span><span class="o">-</span><span class="n">value</span><span class="p">:</span> <span class="mi">9</span>
<span class="nb">id</span><span class="p">:</span> <span class="mo">01</span><span class="n">f9da67</span><span class="o">-</span><span class="mi">9206</span><span class="o">-</span><span class="mi">499</span><span class="n">f</span><span class="o">-</span><span class="n">a985</span><span class="o">-</span><span class="mi">30</span><span class="n">d734ffbbef</span>
<span class="n">lineage</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">kgpl</span><span class="o">.</span><span class="n">Lineage</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0x101338588</span><span class="o">&gt;</span>
<span class="n">url</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">unregistered</span><span class="o">&gt;</span>
<span class="n">annotations</span><span class="p">:</span> <span class="p">[]</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span><span class="o">.</span><span class="n">reassign</span><span class="p">(</span><span class="n">kgplSquare</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span>
<span class="nb">id</span><span class="p">:</span> <span class="mi">8</span><span class="n">cf28bb1</span><span class="o">-</span><span class="n">ea67</span><span class="o">-</span><span class="mi">4</span><span class="n">c37</span><span class="o">-</span><span class="n">a949</span><span class="o">-</span><span class="mi">7</span><span class="n">d8bab2be6f8</span>
<span class="n">owner</span><span class="p">:</span> <span class="n">michjc</span>
<span class="n">url</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">unregistered</span><span class="o">&gt;</span>
<span class="n">annotations</span><span class="p">:</span> <span class="p">[]</span>
<span class="n">current</span><span class="o">-</span><span class="n">value</span><span class="p">:</span> <span class="mi">16</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span><span class="o">.</span><span class="n">currentvalue</span>
<span class="n">concrete</span><span class="o">-</span><span class="n">value</span><span class="p">:</span> <span class="mi">16</span>
<span class="nb">id</span><span class="p">:</span> <span class="mi">2</span><span class="n">ac5abea</span><span class="o">-</span><span class="n">e790</span><span class="o">-</span><span class="mi">4100</span><span class="o">-</span><span class="mi">828</span><span class="n">c</span><span class="o">-</span><span class="mi">39</span><span class="n">f3637e9bc5</span>
<span class="n">lineage</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">kgpl</span><span class="o">.</span><span class="n">Lineage</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0x101417080</span><span class="o">&gt;</span>
<span class="n">url</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">unregistered</span><span class="o">&gt;</span>
<span class="n">annotations</span><span class="p">:</span> <span class="p">[]</span>
</code></pre></div>

<p>Variables are pretty rich objects in KGPL.  <a href="../variables/">You can read more about
them here</a>.</p>
<h2 id="types">Types</h2>
<p>KGPL includes a large general-purpose type library.  This library
has <strong>thousands</strong> of types and is meant to cover most "real world"
concepts. KGPL Entity and Relation values may fall into zero or more
of these types. The types are meant to describe useful classes of
values, such as: </p>
<ul>
<li><code>Politicians</code></li>
<li><code>Countries</code></li>
<li><code>GDPData</code></li>
<li><code>HeartDiseaseData</code></li>
<li>and many others</li>
</ul>
<p>The exact set of types in the KGPL type library will change over time,
but the intention is for it to be general-purpose and comprehensive.</p>
<p>The KGPL type namespace is a URI-style manner of naming types.
The core types are named as <code>/core/&lt;typelabel&gt;</code>, like
<code>/core/Politician</code>, <code>/core/GDPData</code>, and so on.</p>
<p>You use a KGPL type in Python code like this:</p>
<div class="codehilite"><pre><span></span><code><span class="n">def</span> <span class="n">computeElectoralWinRatio</span><span class="p">(</span><span class="n">p</span><span class="p">:</span> <span class="o">/</span><span class="n">core</span><span class="o">/</span><span class="n">Politician</span><span class="p">):</span>
  <span class="n">winCount</span> <span class="o">=</span> <span class="mi">0</span>
  <span class="n">totalElections</span> <span class="o">=</span> <span class="mi">0</span>
  <span class="k">for</span> <span class="n">election</span><span class="p">,</span> <span class="n">didWin</span> <span class="k">in</span> <span class="n">p</span><span class="p">.</span><span class="n">elections</span><span class="p">:</span>
    <span class="n">totalElections</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="n">didWin</span><span class="p">:</span>
      <span class="n">winCount</span> <span class="o">+=</span> <span class="mi">1</span>

  <span class="k">return</span> <span class="n">winCount</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="n">totalElections</span><span class="p">)</span>
</code></pre></div>

<p>A type in KGPL is a value that is treated in certain special
ways. Its <code>concrete-value</code> field is a tuple of two fields:</p>
<ul>
<li><code>typename</code> is a URL-style human-understandable label that describes
  the intended type. </li>
<li><code>typefunc</code> is a function that takes as an argument a single
  parameter: any KGPL value. It returns a probability that determines
  whether the given argument is a "member" of the type.</li>
</ul>
<p>Users can add new types by creating new <code>(typename, typefunc)</code> pairs
and registering them with an accessible <a href="sharingservice.md">KGPL Sharing Service</a>.
The desired namespace for user-registered types is not yet entirely clear,
but should be something like <code>/users/mcafarella/Recipe</code> or
<code>/umich.edu/College</code> or <code>/mit.edu/Lab</code>.</p>
<p>In the core library, the intention is for most type-detection
functions to be machine-learned artifacts, but there is nothing that
requires this.  It might especially make sense for users to define
types algorithmically.</p>
<h2 id="functions">Functions</h2>
<p>A function is a piece of executable code.  A function is another kind
of value.  Like a value, it can be created, but not edited, destroyed,
or versioned. </p>
<p>When a function is executed, it yields the standard results (that is
values), as well as an <strong>Execution</strong> value.  This value encapsulates
the execution event via three fields:</p>
<ul>
<li>The <code>source-function</code> field is the identifier of the value that
  represents the function that was executed.</li>
<li>The <code>timestamp</code> value simply indicates when the function
was run.</li>
<li>The <code>log</code> value indicates any information emitted by the
function during execution.</li>
</ul>
<p>Some of the nodes in a value's directed lineage tree are <strong>Execution</strong>
values. </p>
<p>Like other values, a function can be assigned to a variable.  This is
how a function is named.  That variable can change its value over
time, like any other variable.  It might be shared, become well-known,
and so on.</p>
<p>A function value is fixed, but most of the time when programming or
sharing with others, users refer to a function via a variable name.</p>
<p>Since type membership is probabilistic, it is possible that a single
function invocation may satisfy multiple functions simultaneously.  In
these cases, the system will invoke the maximally-probable function.</p>
<h2 id="code">Code</h2>
<p>The body of a KGPL Function is simply Python code, with a few minor
differences:</p>
<ul>
<li>The function signature must declare types for all of its input
  parameters. These can include KGPL Types.</li>
<li>Function inputs are KGPL variables.  </li>
<li>The function will be executed in a VM-style environment that will be
  destroyed immediately after execution, so the programmer cannot rely
  on retaining side effects.  All important results must be returned
  by the function call.</li>
<li>The function must create KGPL-style results to be returned. In
  particular, it must create an <strong>Execution</strong> value and appropriate
  KGPL-style values (with unique identifiers and lineage) for all
  returned items.</li>
</ul>
<p>Building an accurate lineage graph for each output value can be
burdensome. If the function's outputs are created using special KGPL
helper functions, this output lineage graph will be generated
automatically.</p>
<h2 id="sharing">Sharing</h2>
<p>KGPL enables easy <strong>value sharing</strong> and <strong>variable sharing</strong>.  Both
require the use of a <strong>KGPL sharing service</strong>.</p>
<p>In order to share a value with another user or program, a KGPL runtime
must:</p>
<ol>
<li>Register the value(s) with a KGPL sharing service. The runtime
   transmits all the relevant data to the service. The service replies
   with a URL.</li>
<li>Retain the URL, which can be forwarded to external users or
   programs.</li>
<li>Be aware that the KGPL sharing service may replicate the value and
   share with other KGPL services.</li>
</ol>
<p>Registering a variable is much the same, with two important differences:</p>
<ol>
<li>A KGPL sharing service cannot replicate a variable with other
   services. A registered variable lives on a single service.</li>
<li>A KGPL sharing service must enforce variable ownership access
   control. Only the owner of a variable is allowed to update its
   value in the future.   </li>
</ol>
<h2 id="interfaces">Interfaces</h2>
<p>How is a KGPL function started by a user?  Several possible interfaces
are available.</p>
<h3 id="unambiguous-invocation">Unambiguous Invocation</h3>
<p>The most straightforward is the <strong>unambiguous interface</strong>, intended
for data scientists and developers.  This is how one KGPL function
invokes another.  The function name and
its parameters are unambiguously indicated by the user's code.  The only
ambiguity around which method is invoked is driven by
identically-named functions with different type signatures.</p>
<h3 id="method-ambiguous-invocation">Method-Ambiguous Invocation</h3>
<p>Slightly more user-friendly is the <strong>method-ambiguous interface</strong>,
in which parameters and their order are indicated entirely
unambiguously, but the method name is indicated via text keywords.
This might be appropriate in a search-style ranking interface.</p>
<h3 id="implicit-invocation">Implicit Invocation</h3>
<p>Finally, the most user-friendly input mode is one in which the
function, its parameters, and their order are given by the user
entirely via a text-style or voice-driven interface.</p>
<h2 id="tools">Tools</h2>
<p>The KGPL system includes several pieces of code and data:</p>
<ol>
<li>The KGPL core type and variable library. These are types and variables
   that are globally accessible. They are shared at the "root" KGPL
   sharing service.</li>
<li>Python libraries that implement the type, variable, and value
   systems.</li>
<li>A sharing service runtime binary that can be downloaded and executed by
   anyone.</li>
<li>A "root" sharing service that runs that binary and is always
   available to all KGPL users.    </li>
</ol>
              
            </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
